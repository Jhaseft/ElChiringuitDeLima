import{j as e,r as h,u as b}from"./app-F_Al6nS-.js";import{P as j}from"./PasswordRules-Q5YQ_LVd.js";function f({step:n}){return e.jsx("div",{className:"flex justify-between mb-6",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`w-8 h-8 mx-auto rounded-full flex items-center justify-center text-white font-bold ${n===t?"bg-blue-600":n>t?"bg-green-500":"bg-gray-300"}`,children:t}),e.jsx("p",{className:"text-center text-xs mt-1",children:t===1?"Personales":t===2?"Seguridad":"Términos"})]},t))})}function y({data:n,setData:t,errors:r}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nacionalidad"}),e.jsxs("select",{value:n.nationality,onChange:s=>t("nationality",s.target.value),className:"border rounded w-full px-2 py-1",required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),e.jsx("option",{value:"boliviano",children:"Boliviano"}),e.jsx("option",{value:"peruano",children:"Peruano"})]}),r.nationality&&e.jsx("p",{className:"text-red-500 text-sm",children:r.nationality})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Teléfono"}),e.jsx("input",{type:"text",value:n.phone,onChange:s=>t("phone",s.target.value),className:"border rounded w-full px-2 py-1",required:!0}),r.phone&&e.jsx("p",{className:"text-red-500 text-sm",children:r.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Documento"}),e.jsx("input",{type:"text",value:n.document_number,onChange:s=>t("document_number",s.target.value),className:"border rounded w-full px-2 py-1",required:!0}),r.document_number&&e.jsx("p",{className:"text-red-500 text-sm",children:r.document_number})]})]})}function g({data:n,setData:t,errors:r,passwordRules:s}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contraseña"}),e.jsx("input",{type:"password",value:n.password,onChange:a=>t("password",a.target.value),className:"border rounded w-full px-2 py-1",required:!0}),r.password&&e.jsx("p",{className:"text-red-500 text-sm",children:r.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirmar contraseña"}),e.jsx("input",{type:"password",value:n.password_confirmation,onChange:a=>t("password_confirmation",a.target.value),className:`border rounded w-full px-2 py-1 ${s.match?"border-green-500":"border-gray-300"}`,required:!0}),n.password_confirmation.length>0&&!s.match&&e.jsx("p",{className:"text-red-500 text-sm",children:"Las contraseñas no coinciden"})]}),e.jsx(j,{rules:s})]})}function w({data:n,setData:t,errors:r}){return e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:n.terms,onChange:s=>t("terms",s.target.checked),className:"mr-2",required:!0}),"Acepto los"," ",e.jsx("a",{href:"/terminos",className:"text-blue-600 underline",children:"términos y condiciones"})]}),r.terms&&e.jsx("p",{className:"text-red-500 text-sm",children:r.terms})]})}function S({user:n}){const[t,r]=h.useState(1),{data:s,setData:a,post:d,processing:c,errors:o}=b({nationality:n?.nationality||"",phone:n?.phone||"",document_number:n?.document_number||"",password:"",password_confirmation:"",terms:!1}),l={length:s.password.length>=8,upper:/[A-Z]/.test(s.password),lower:/[a-z]/.test(s.password),number:/[0-9]/.test(s.password),special:/[!@#$%^&*]/.test(s.password),match:s.password===s.password_confirmation&&s.password.length>0},i=()=>t===1?!s.nationality||!s.phone||!s.document_number:t===2?!l.length||!l.upper||!l.lower||!l.number||!l.special||!l.match:t===3?!s.terms:!1,m=()=>!i()&&r(t+1),u=()=>r(t-1),x=p=>{p.preventDefault(),t<3?m():d(route("complete-profile.store"),{onError:()=>console.log(o)})};return e.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded-lg shadow-md",children:[e.jsx("h1",{className:"text-xl font-bold mb-6 text-center",children:"Completa tu perfil"}),e.jsx(f,{step:t}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[t===1&&e.jsx(y,{data:s,setData:a,errors:o}),t===2&&e.jsx(g,{data:s,setData:a,errors:o,passwordRules:l}),t===3&&e.jsx(w,{data:s,setData:a,errors:o}),e.jsxs("div",{className:"flex justify-between mt-4",children:[t>1&&e.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 rounded border border-gray-300",children:"Atrás"}),e.jsx("button",{type:"submit",disabled:c||i(),className:"px-6 py-2 bg-blue-600 text-white rounded w-full sm:w-auto disabled:opacity-50",children:t<3?"Siguiente":"Guardar"})]})]})]})}export{S as default};
