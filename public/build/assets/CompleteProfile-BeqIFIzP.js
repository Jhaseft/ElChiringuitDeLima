import{j as e,r as u,u as j}from"./app-C2ApAMyk.js";import{E as m,a as x,P as v}from"./PasswordRules-D76qHLiC.js";import"./createLucideIcon-BgIkNOq6.js";function y({step:l}){return e.jsx("div",{className:"flex justify-between mb-6",children:[1,2,3].map(s=>e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`w-8 h-8 mx-auto rounded-full flex items-center justify-center text-white font-bold ${l===s?"bg-blue-600":l>s?"bg-green-500":"bg-gray-300"}`,children:s}),e.jsx("p",{className:"text-center text-xs mt-1",children:s===1?"Personales":s===2?"Seguridad":"Términos"})]},s))})}function w({data:l,setData:s,errors:n}){const t=[{value:"",label:"Seleccione...",flag:""},{value:"+591",label:"+591",flag:"https://res.cloudinary.com/dnbklbswg/image/upload/v1756307093/bo_cvvq8f.png"},{value:"+51",label:"+51",flag:"https://res.cloudinary.com/dnbklbswg/image/upload/v1756307130/pe_wfge4z.png"},{value:"+54",label:"+54",flag:"https://res.cloudinary.com/dnbklbswg/image/upload/v1756307148/ar_gfxwtp.png"},{value:"+56",label:"+56",flag:"https://res.cloudinary.com/dnbklbswg/image/upload/v1756307165/cl_pevfj1.png"},{value:"+57",label:"+57",flag:"https://res.cloudinary.com/dnbklbswg/image/upload/v1756307169/co_wpavku.png"},{value:"+58",label:"+58",flag:"https://res.cloudinary.com/dnbklbswg/image/upload/v1756307176/ve_bnigse.png"},{value:"+55",label:"+55",flag:"https://res.cloudinary.com/dnbklbswg/image/upload/v1756307180/br_vm2zsn.png"},{value:"+53",label:"+53",flag:"https://res.cloudinary.com/dnbklbswg/image/upload/v1756307178/cu_bespzl.png"}],i=(a,r)=>{if(!a||!r){s("phone","");return}const c=a.replace(/\D/g,"");s("phone",`${c}${r}`)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nacionalidad"}),e.jsxs("select",{value:l.nationality||"",onChange:a=>s("nationality",a.target.value),className:"border rounded w-full px-2 py-1",required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),e.jsx("option",{value:"boliviano",children:"Boliviano"}),e.jsx("option",{value:"peruano",children:"Peruano"})]}),n.nationality&&e.jsx("p",{className:"text-red-500 text-sm",children:n.nationality})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Teléfono"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("select",{value:l.phone_code||"",onChange:a=>{s("phone_code",a.target.value),i(a.target.value,l.phone_number)},className:"rounded border px-2 py-1",children:t.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))}),e.jsx("input",{type:"tel",value:l.phone_number||"",onChange:a=>{const r=a.target.value.replace(/\D/g,"");s("phone_number",r),i(l.phone_code,r)},required:!0,placeholder:"Ej: 76543210",className:"flex-1 rounded border px-2 py-1"})]}),n.phone&&e.jsx("p",{className:"text-red-500 text-sm",children:n.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"DNI o CI"}),e.jsx("input",{type:"number",value:l.document_number||"",onChange:a=>{const r=a.target.value.replace(/\D/g,"");s("document_number",r)},required:!0,placeholder:"Ej: 1234567",className:"border rounded w-full px-2 py-1"}),n.document_number&&e.jsx("p",{className:"text-red-500 text-sm",children:n.document_number})]})]})}function N({data:l,setData:s,errors:n,passwordRules:t}){const[i,a]=u.useState(!1),[r,c]=u.useState(!1);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contraseña"}),e.jsx("input",{type:i?"text":"password",value:l.password,onChange:o=>s("password",o.target.value),className:"border rounded w-full px-2 py-1 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute right-2 top-8 text-gray-500 hover:text-gray-700",children:i?e.jsx(m,{size:18}):e.jsx(x,{size:18})}),n.password&&e.jsx("p",{className:"text-red-500 text-sm",children:n.password})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirmar contraseña"}),e.jsx("input",{type:r?"text":"password",value:l.password_confirmation,onChange:o=>s("password_confirmation",o.target.value),className:`border rounded w-full px-2 py-1 pr-10 ${t.match?"border-green-500":"border-gray-300"}`,required:!0}),e.jsx("button",{type:"button",onClick:()=>c(!r),className:"absolute right-2 top-8 text-gray-500 hover:text-gray-700",children:r?e.jsx(m,{size:18}):e.jsx(x,{size:18})}),l.password_confirmation.length>0&&!t.match&&e.jsx("p",{className:"text-red-500 text-sm",children:"Las contraseñas no coinciden"})]}),e.jsx(v,{rules:t})]})}function _({data:l,setData:s,errors:n}){return e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.terms,onChange:t=>s("terms",t.target.checked),className:"mr-2",required:!0}),"Acepto los"," ",e.jsx("a",{href:"/politicas",className:"text-blue-600 underline",children:"términos y condiciones"})]}),n.terms&&e.jsx("p",{className:"text-red-500 text-sm",children:n.terms})]})}function P({user:l}){const[s,n]=u.useState(1),{data:t,setData:i,post:a,processing:r,errors:c}=j({nationality:l?.nationality||"",phone:l?.phone||"",document_number:l?.document_number||"",password:"",password_confirmation:"",terms:!1}),o={length:t.password.length>=8,upper:/[A-Z]/.test(t.password),lower:/[a-z]/.test(t.password),number:/[0-9]/.test(t.password),special:/[!@#$%^&*]/.test(t.password),match:t.password===t.password_confirmation&&t.password.length>0},p=()=>s===1?!t.nationality||!t.phone||!t.document_number:s===2?!o.length||!o.upper||!o.lower||!o.number||!o.special||!o.match:s===3?!t.terms:!1,h=()=>!p()&&n(s+1),b=()=>n(s-1),g=d=>{d.preventDefault(),s<3?h():a(route("complete-profile.store"),{onError:()=>console.log(c)})};return e.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded-lg shadow-md",children:[e.jsx("h1",{className:"text-xl font-bold mb-6 text-center",children:"Completa tu perfil"}),e.jsx(y,{step:s}),Object.keys(c).length>0&&e.jsx("div",{className:"p-3 mb-4 text-sm text-red-700 bg-red-100 rounded",children:e.jsx("ul",{className:"list-disc list-inside",children:Object.values(c).map((d,f)=>e.jsx("li",{children:d},f))})}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s===1&&e.jsx(w,{data:t,setData:i,errors:c}),s===2&&e.jsx(N,{data:t,setData:i,errors:c,passwordRules:o}),s===3&&e.jsx(_,{data:t,setData:i,errors:c}),e.jsxs("div",{className:"flex justify-between mt-4",children:[s>1&&e.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 rounded border border-gray-300",children:"Atrás"}),e.jsx("button",{type:"submit",disabled:r||p(),className:"px-6 py-2 bg-blue-600 text-white rounded w-full sm:w-auto disabled:opacity-50",children:s<3?"Siguiente":"Guardar"})]})]})]})}export{P as default};
