import{j as e,r as a}from"./app-Cn7gMzj7.js";import{c as h}from"./createLucideIcon-DXRe0Sfi.js";import{R as $}from"./refresh-cw-BXb8UGcQ.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],I=h("arrow-left",E);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],q=h("arrow-right",U);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],O=h("camera",D);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],H=h("car",G);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]],T=h("id-card",V);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],z=h("info",K);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],Y=h("plane",W);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],J=h("square",F);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],X=h("video",Q);function re({step:n,totalSteps:o,labels:u=[]}){const l=Math.max(0,Math.min(100,n/o*100));return e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex justify-between mb-2",children:Array.from({length:o},(x,s)=>e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:`w-7 h-7 rounded-full flex items-center justify-center border-2 transition-colors ${s+1<=n?"bg-indigo-600 border-indigo-600 text-white":"bg-white border-gray-300 text-gray-400"}`,children:s+1}),u[s]&&e.jsx("span",{className:"mt-1 text-[11px] sm:text-xs text-gray-600 font-medium",children:u[s]})]},s))}),e.jsx("div",{className:"w-full bg-gray-300 h-3 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:"bg-indigo-600 h-3 rounded-full transition-all duration-500",style:{width:`${l}%`}})}),e.jsx("p",{className:"text-center mt-2 font-medium text-gray-700",children:`Paso ${n} de ${o}`})]})}const Z=[{id:"ci",label:"Carnet de identidad",icon:T,help:"Foto de anverso y reverso"},{id:"licencia",label:"Licencia de conducir",icon:H,help:"Foto de anverso y reverso"},{id:"pasaporte",label:"Pasaporte",icon:Y,help:"Una sola foto"}];function se({value:n,onChange:o,onNext:u}){return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 space-y-5",children:[e.jsx("h2",{className:"font-semibold text-lg text-center",children:"Selecciona el tipo de documento"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:Z.map(l=>{const x=l.icon,s=n===l.id;return e.jsx("button",{type:"button",onClick:()=>o(l.id),className:`rounded-2xl border px-4 py-4 text-left shadow-sm hover:shadow transition ${s?"border-indigo-600 ring-2 ring-indigo-200 bg-indigo-50":"border-gray-200 bg-white"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`p-2 rounded-full ${s?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700"}`,children:e.jsx(x,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm sm:text-base",children:l.label}),e.jsx("p",{className:"text-xs text-gray-500",children:l.help})]})]})},l.id)})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:u,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg",children:"Continuar"})})]})}function ae({docType:n,docFrontBlob:o,docBackBlob:u,setDocFrontBlob:l,setDocBackBlob:x,onNext:s,onBack:b}){const r=a.useRef(null),g=a.useRef(null),[p,y]=a.useState(null),[k,c]=a.useState("Iniciando c√°mara..."),[C,j]=a.useState(""),[m,v]=a.useState("front"),[N,f]=a.useState("capturing"),w=n==="ci"||n==="licencia",i=()=>{try{r.current?.srcObject&&(r.current.srcObject.getTracks().forEach(t=>t.stop()),r.current.srcObject=null),p&&p.getTracks().forEach(t=>t.stop())}catch{}y(null)},P=()=>new Promise(t=>{const d=r.current;if(!d||d.readyState>=1)return t();const S=()=>{d.removeEventListener("loadedmetadata",S),t()};d.addEventListener("loadedmetadata",S,{once:!0})}),R=async()=>{if(i(),j(""),c(m==="front"?"üìÑ Ajusta tu documento dentro del marco y presiona Capturar.":"Prepar√°ndote para el reverso..."),m==="back"){let t=3;c(`üìÑ Ahora tomar√°s foto del reverso en ${t}...`);const d=setInterval(()=>{t--,t>0?c(`üìÑ Ahora tomar√°s foto del reverso en ${t}...`):(clearInterval(d),c("üìÑ Ajusta el reverso dentro del marco y presiona Capturar."),_())},1e3)}else _()},_=async()=>{try{let t=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1});if(!r.current)return;r.current.srcObject=t,r.current.setAttribute("playsinline",""),r.current.muted=!0,await P(),await r.current.play(),y(t)}catch(t){console.error(t),j("‚ùåRecarga la Pagina , No se pudo activar la c√°mara ."),c("")}},A=()=>{if(!r.current||!g.current)return;const t=r.current,d=g.current;d.width=t.videoWidth||720,d.height=t.videoHeight||1280,d.getContext("2d").drawImage(t,0,0,d.width,d.height),d.toBlob(M=>{M&&(m==="front"?(l(M),w?(i(),v("back"),c("‚úÖ Frontal capturado. Ahora el reverso."),setTimeout(()=>R(),2e3)):(i(),f("captured"),c("‚úÖ Documento capturado."))):(x(M),i(),f("captured"),c("‚úÖ Documento completo (anverso y reverso).")))},"image/jpeg",.92)},L=()=>{l(null),x(null),v("front"),f("capturing"),j(""),c("üìÑ Ajusta tu documento dentro del marco y presiona Capturar."),R()};return a.useEffect(()=>(v("front"),f("capturing"),R(),()=>i()),[n]),e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 space-y-6 max-w-lg mx-auto border border-gray-200",children:[e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("span",{className:"text-sm text-gray-500 mb-1",children:"Captura de documento"}),e.jsxs("p",{className:"font-semibold text-xl text-gray-800 flex items-center gap-2",children:[n==="pasaporte"?"Pasaporte":m==="front"?"Anverso":"Reverso",e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-indigo-100 text-indigo-700",children:n.toUpperCase()})]})]}),e.jsx("div",{className:"relative border-2 border-dashed border-indigo-400 bg-gray-900 aspect-[3/4] rounded-xl overflow-hidden flex items-center justify-center shadow-inner",children:m==="front"&&!o||m==="back"&&!u?e.jsxs(e.Fragment,{children:[e.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center px-3 text-center",children:e.jsx("p",{className:"text-white text-sm bg-black/60 rounded-lg px-3 py-2",children:C||k})}),e.jsx("div",{className:"absolute h-56 w-72 border-2 border-green-400 rounded-lg pointer-events-none animate-pulse"})]}):e.jsx("img",{src:URL.createObjectURL(m==="front"?o:u),alt:"Documento",className:"w-full h-full object-cover rounded-lg"})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 font-semibold",children:[e.jsx(z,{size:18})," Recomendaciones KYC"]}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"Coloca el documento completo dentro del marco."}),e.jsx("li",{children:"Usa buena iluminaci√≥n y evita reflejos."}),e.jsx("li",{children:"No cubras datos con las manos."}),e.jsx("li",{children:"Fondo uniforme y sin distracciones."}),e.jsx("li",{children:"Verifica que el texto sea legible."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mt-4",children:[N==="capturing"&&(m==="front"&&!o||m==="back"&&!u)&&e.jsxs("button",{onClick:A,className:"col-span-2 bg-blue-600 hover:bg-blue-700 text-white flex items-center justify-center gap-2 px-4 py-3 rounded-xl shadow-lg",children:[e.jsx(O,{size:18})," Capturar"]}),N==="captured"&&e.jsxs("button",{onClick:L,className:"col-span-2 bg-yellow-500 hover:bg-yellow-600 text-white flex items-center justify-center gap-2 px-4 py-3 rounded-xl shadow-lg",children:[e.jsx($,{size:18})," Repetir"]}),e.jsxs("button",{onClick:b,className:"bg-gray-200 hover:bg-gray-300 text-gray-800 flex items-center justify-center gap-2 px-3 py-3 rounded-xl shadow",children:[e.jsx(I,{size:18})," Atr√°s"]}),e.jsxs("button",{onClick:s,disabled:!o||w&&!u,className:`flex items-center justify-center gap-2 px-3 py-3 rounded-xl shadow ${!o||w&&!u?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"}`,children:["Siguiente ",e.jsx(q,{size:18})]})]}),e.jsx("canvas",{ref:g,className:"hidden"})]})}function ne({videoBlob:n,setVideoBlob:o,nextStep:u,prevStep:l}){const x=a.useRef(null),s=a.useRef(null),b=a.useRef([]),[r,g]=a.useState("preview"),[p,y]=a.useState(null),[k,c]=a.useState("C√°mara lista. Pulsa 'Grabar'."),[C,j]=a.useState(""),m=()=>{p&&(p.getTracks().forEach(i=>i.stop()),y(null))},v=async()=>{try{const i=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!0});y(i),x.current&&(x.current.srcObject=i,x.current.muted=!0,x.current.setAttribute("playsinline",""),await x.current.play()),g("preview"),c("C√°mara lista. Pulsa 'Grabar'.")}catch{j("‚ùåRecarga la Pagina No se pudo activar la c√°mara."),c("")}},N=()=>{p&&(b.current=[],s.current=new MediaRecorder(p,{mimeType:"video/webm"}),s.current.ondataavailable=i=>{i.data.size>0&&b.current.push(i.data)},s.current.onstop=()=>{const i=new Blob(b.current,{type:"video/webm"});o(i),c("‚úÖ Grabaci√≥n finalizada."),g("done")},s.current.start(),g("recording"),c("üé• Grabando..."))},f=()=>{s.current&&r==="recording"&&s.current.stop()},w=()=>{o(null),g("preview"),c("C√°mara lista. Pulsa 'Grabar'.")};return a.useEffect(()=>(v(),()=>m()),[]),e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 space-y-6 max-w-lg mx-auto border border-gray-200",children:[e.jsx("p",{className:"font-semibold text-lg text-center text-gray-800 flex items-center justify-center gap-2",children:"üé• Video selfie (c√°mara frontal)"}),e.jsxs("div",{className:"relative border-2 border-dashed border-indigo-400 bg-gray-900 aspect-[3/4] rounded-xl flex items-center justify-center overflow-hidden shadow-inner",children:[r!=="done"?e.jsx("video",{ref:x,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}):e.jsx("video",{src:URL.createObjectURL(n),controls:!0,playsInline:!0,className:"w-full h-full object-cover rounded-lg"}),e.jsx("div",{className:"absolute bottom-2 inset-x-0 flex justify-center px-3 text-center",children:e.jsx("p",{className:"text-white text-sm bg-black/60 px-3 py-1 rounded-lg",children:C||k})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 font-semibold",children:[e.jsx(z,{size:18})," Recomendaciones para el video"]}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"Graba en un lugar bien iluminado y silencioso."}),e.jsx("li",{children:"Mant√©n tu rostro en movimiento."}),e.jsx("li",{children:"No uses gafas oscuras ni cubras tu cara."}),e.jsx("li",{children:"Habla claramente cuando se te indique."}),e.jsx("li",{children:"Mant√©n el dispositivo estable."})]})]}),e.jsxs("div",{className:"flex justify-center gap-3 flex-wrap",children:[r==="preview"&&e.jsxs("button",{onClick:N,className:"bg-red-600 hover:bg-red-700 text-white flex items-center gap-2 px-5 py-2 rounded-xl shadow-lg",children:[e.jsx(X,{size:18})," Grabar"]}),r==="recording"&&e.jsxs("button",{onClick:f,className:"bg-yellow-500 hover:bg-yellow-600 text-white flex items-center gap-2 px-5 py-2 rounded-xl shadow-lg",children:[e.jsx(J,{size:18})," Detener"]}),r==="done"&&e.jsxs("button",{onClick:w,className:"bg-yellow-500 hover:bg-yellow-600 text-white flex items-center gap-2 px-5 py-2 rounded-xl shadow-lg",children:[e.jsx($,{size:18})," Repetir"]}),e.jsx("button",{onClick:l,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded-xl shadow",children:"Atr√°s"}),e.jsx("button",{onClick:u,disabled:!n,className:`px-4 py-2 rounded-xl shadow flex items-center gap-2 ${n?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:"Siguiente"})]})]})}export{se as D,re as S,ae as a,ne as b};
