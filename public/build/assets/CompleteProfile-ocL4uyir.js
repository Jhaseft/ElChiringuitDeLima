import{j as e,r as d,u as y}from"./app-DO7p01gJ.js";import{P as v}from"./PasswordRules-BFtZHqRV.js";import{c as x}from"./createLucideIcon-BdZi2pVK.js";function j({step:a}){return e.jsx("div",{className:"flex justify-between mb-6",children:[1,2,3].map(s=>e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`w-8 h-8 mx-auto rounded-full flex items-center justify-center text-white font-bold ${a===s?"bg-blue-600":a>s?"bg-green-500":"bg-gray-300"}`,children:s}),e.jsx("p",{className:"text-center text-xs mt-1",children:s===1?"Personales":s===2?"Seguridad":"Términos"})]},s))})}function w({data:a,setData:s,errors:n}){const t=[{value:"",label:"Seleccione...",flag:""},{value:"+591",label:"+591",flag:"https://res.cloudinary.com/dnbklbswg/image/upload/v1756307093/bo_cvvq8f.png"},{value:"+51",label:"+51",flag:"https://res.cloudinary.com/dnbklbswg/image/upload/v1756307130/pe_wfge4z.png"},{value:"+54",label:"+54",flag:"https://res.cloudinary.com/dnbklbswg/image/upload/v1756307148/ar_gfxwtp.png"},{value:"+56",label:"+56",flag:"https://res.cloudinary.com/dnbklbswg/image/upload/v1756307165/cl_pevfj1.png"},{value:"+57",label:"+57",flag:"https://res.cloudinary.com/dnbklbswg/image/upload/v1756307169/co_wpavku.png"},{value:"+58",label:"+58",flag:"https://res.cloudinary.com/dnbklbswg/image/upload/v1756307176/ve_bnigse.png"},{value:"+55",label:"+55",flag:"https://res.cloudinary.com/dnbklbswg/image/upload/v1756307180/br_vm2zsn.png"},{value:"+53",label:"+53",flag:"https://res.cloudinary.com/dnbklbswg/image/upload/v1756307178/cu_bespzl.png"}],c=(l,r)=>{if(!l||!r){s("phone","");return}const i=l.replace(/\D/g,"");s("phone",`${i}${r}`)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nacionalidad"}),e.jsxs("select",{value:a.nationality||"",onChange:l=>s("nationality",l.target.value),className:"border rounded w-full px-2 py-1",required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),e.jsx("option",{value:"boliviano",children:"Boliviano"}),e.jsx("option",{value:"peruano",children:"Peruano"})]}),n.nationality&&e.jsx("p",{className:"text-red-500 text-sm",children:n.nationality})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Teléfono"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("select",{value:a.phone_code||"",onChange:l=>{s("phone_code",l.target.value),c(l.target.value,a.phone_number)},className:"rounded border px-2 py-1",children:t.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))}),e.jsx("input",{type:"tel",value:a.phone_number||"",onChange:l=>{const r=l.target.value.replace(/\D/g,"");s("phone_number",r),c(a.phone_code,r)},required:!0,placeholder:"Ej: 76543210",className:"flex-1 rounded border px-2 py-1"})]}),n.phone&&e.jsx("p",{className:"text-red-500 text-sm",children:n.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"DNI o CI"}),e.jsx("input",{type:"text",value:a.document_number||"",onChange:l=>{const r=l.target.value.replace(/\D/g,"");s("document_number",r)},required:!0,placeholder:"Ej: 1234567",className:"border rounded w-full px-2 py-1"}),n.document_number&&e.jsx("p",{className:"text-red-500 text-sm",children:n.document_number})]})]})}/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],p=x("eye-off",N);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],m=x("eye",_);function k({data:a,setData:s,errors:n,passwordRules:t}){const[c,l]=d.useState(!1),[r,i]=d.useState(!1);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contraseña"}),e.jsx("input",{type:c?"text":"password",value:a.password,onChange:o=>s("password",o.target.value),className:"border rounded w-full px-2 py-1 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>l(!c),className:"absolute right-2 top-8 text-gray-500 hover:text-gray-700",children:c?e.jsx(p,{size:18}):e.jsx(m,{size:18})}),n.password&&e.jsx("p",{className:"text-red-500 text-sm",children:n.password})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirmar contraseña"}),e.jsx("input",{type:r?"text":"password",value:a.password_confirmation,onChange:o=>s("password_confirmation",o.target.value),className:`border rounded w-full px-2 py-1 pr-10 ${t.match?"border-green-500":"border-gray-300"}`,required:!0}),e.jsx("button",{type:"button",onClick:()=>i(!r),className:"absolute right-2 top-8 text-gray-500 hover:text-gray-700",children:r?e.jsx(p,{size:18}):e.jsx(m,{size:18})}),a.password_confirmation.length>0&&!t.match&&e.jsx("p",{className:"text-red-500 text-sm",children:"Las contraseñas no coinciden"})]}),e.jsx(v,{rules:t})]})}function C({data:a,setData:s,errors:n}){return e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.terms,onChange:t=>s("terms",t.target.checked),className:"mr-2",required:!0}),"Acepto los"," ",e.jsx("a",{href:"/politicas",className:"text-blue-600 underline",children:"términos y condiciones"})]}),n.terms&&e.jsx("p",{className:"text-red-500 text-sm",children:n.terms})]})}function q({user:a}){const[s,n]=d.useState(1),{data:t,setData:c,post:l,processing:r,errors:i}=y({nationality:a?.nationality||"",phone:a?.phone||"",document_number:a?.document_number||"",password:"",password_confirmation:"",terms:!1}),o={length:t.password.length>=8,upper:/[A-Z]/.test(t.password),lower:/[a-z]/.test(t.password),number:/[0-9]/.test(t.password),special:/[!@#$%^&*]/.test(t.password),match:t.password===t.password_confirmation&&t.password.length>0},u=()=>s===1?!t.nationality||!t.phone||!t.document_number:s===2?!o.length||!o.upper||!o.lower||!o.number||!o.special||!o.match:s===3?!t.terms:!1,h=()=>!u()&&n(s+1),b=()=>n(s-1),g=f=>{f.preventDefault(),s<3?h():l(route("complete-profile.store"),{onError:()=>console.log(i)})};return e.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded-lg shadow-md",children:[e.jsx("h1",{className:"text-xl font-bold mb-6 text-center",children:"Completa tu perfil"}),e.jsx(j,{step:s}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s===1&&e.jsx(w,{data:t,setData:c,errors:i}),s===2&&e.jsx(k,{data:t,setData:c,errors:i,passwordRules:o}),s===3&&e.jsx(C,{data:t,setData:c,errors:i}),e.jsxs("div",{className:"flex justify-between mt-4",children:[s>1&&e.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 rounded border border-gray-300",children:"Atrás"}),e.jsx("button",{type:"submit",disabled:r||u(),className:"px-6 py-2 bg-blue-600 text-white rounded w-full sm:w-auto disabled:opacity-50",children:s<3?"Siguiente":"Guardar"})]})]})]})}export{q as default};
